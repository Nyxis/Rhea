<?xml version="1.0" encoding="UTF-8"?>
<database defaultIdMethod="native" name="default" namespace="EasyTask\Bundle\WorkflowBundle\Model">

    <table name="task">
        <vendor type="mysql">
           <parameter name="Engine" value="InnoDB"/>
        </vendor>
        <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" description="id, primary key" />
        <column name="type" type="VARCHAR"  required="true" description="type of the task" />
        <behavior name="timestampable" />
        <index>
            <index-column name="type"/>
        </index>
    </table>

    <table name="task_state">
        <vendor type="mysql">
           <parameter name="Engine" value="InnoDB"/>
        </vendor>
        <column name="id" type="INTEGER" primaryKey="true" required="true" autoIncrement="true" description="id, primary key" />
        <column name="task_id" type="INTEGER" required="true" description="task fk" />
        <column name="code" type="VARCHAR"  required="true" description="current state code" />
        <column name="next" type="VARCHAR"  required="true" description="next state code" />
        <column name="current" type="BOOLEAN" required="true" />
        <behavior name="timestampable" />

        <foreign-key foreignTable="task" skipSql="true">
            <reference local="task_id" foreign="id"/>
        </foreign-key>
    </table>

    <!-- <behavior name="i18n">
        <parameter name="i18n_columns" value="title"/>
        <parameter name="default_locale" value="fr" />
    </behavior>
    <unique>
        <unique-column name="tag"/>
        <unique-column name="universe_id"/>
    </unique>
    <foreign-key foreignTable="universe" skipSql="true">
        <reference local="universe_id" foreign="id"/>
    </foreign-key> -->

</database>
